(println "=== Test: With list creation (like Example 8) ===")

min_of_three = {a b c ->
  (if (and (less_than a b) (less_than a c))
    {<- a}
    {(if (less_than b c) {<- b} {<- c})})
}

max_of_three = {a b c ->
  (if (and (greater_than a b) (greater_than a c))
    {<- a}
    {(if (greater_than b c) {<- b} {<- c})})
}

// EXACT pattern with LIST creation
sort_three = {a b c ->
  min_val = (min_of_three a b c)
  max_val = (max_of_three a b c)
  mid = (subtract (add a b c) (add min_val max_val))
  result = [min_val, mid, max_val]
  <- result
}

sorted = (sort_three 30 10 20)
(println "Result:" sorted)
(println "Expected: [10, 20, 30]")
